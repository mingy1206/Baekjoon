n,m = map(int, input().split(' '))

arr = [list(map(int, input().split(' '))) for _ in range(n)]




tetromino = [[(0,0), (0,1), (0,2), (0,3)], [(0,0), (1,0), (2,0), (3,0)],
             [(0,0), (0,1), (1,0), (1,1)],
             [(0,0), (0,1), (0,2), (1,2)], [(0,2), (1,0), (1,1), (1,2)], [(0,0), (0,1), (0,2), (1,0)], [(0,0), (1,0), (1,1), (1,2)],
             [(0,0), (1,0), (2,0), (2,1)], [(0,0), (0,1), (1,0), (2,0)], [(0,0), (0,1), (1,1), (2,1)], [(0,1), (1,1), (2,0), (2,1)],
             [(0,0), (0,1), (1,1), (1,2)], [(0,1), (0,2), (1,0), (1,1)], [(0,0), (1,0), (1,1), (2,1)], [(0,1), (1,0), (1,1), (2,0)],
             [(0,0), (0,1), (0,2), (1,1)], [(0,1), (1,0), (1,1), (1,2)], [(0,1), (1,0), (1,1), (2,1)], [(0,0), (1,0), (1,1), (2,0)]]

max_result= 0
for y in range(n):
    for x in range(m):
        for pol in tetromino:
            result = 0
            for dx, dy in pol:
                nx = x + dx
                ny = y + dy
                if nx >= m or nx < 0 or ny >= n or ny <0:
                    break
                else:
                    result += arr[ny][nx]
            if result > max_result:
                max_result = result

print(max_result)